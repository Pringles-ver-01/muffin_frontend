{"ast":null,"code":"import _toConsumableArray from \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/src/components/login/opinion/opinionDetail/OpinionDetail.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./opinionDetail.style.css\";\nimport Navbar from \"../../logined_navbar/Navbar\";\nimport Menu from \"../../menu/Menu\";\nimport axios from \"axios\";\n\nvar OpinionDetail = function OpinionDetail() {\n  var url = \"http://localhost:8080/boards\";\n\n  var _useState = useState(JSON.parse(sessionStorage.getItem(\"opinionDetail\"))),\n      _useState2 = _slicedToArray(_useState, 2),\n      board = _useState2[0],\n      setBoard = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      authority = _useState4[0],\n      setAuthority = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      content = _useState6[0],\n      setContent = _useState6[1];\n\n  var history = useHistory();\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      commentContent = _useState8[0],\n      setCommentContent = _useState8[1];\n\n  var onChangeComment = function onChangeComment(e) {\n    setCommentContent(e.target.value);\n  };\n\n  function getFormatDate(date) {\n    var year = date.getFullYear();\n    var month = 1 + date.getMonth();\n    month = month >= 10 ? month : \"0\" + month;\n    var day = date.getDate();\n    day = day >= 10 ? day : \"0\" + day;\n    return year + \"-\" + month + \"-\" + day;\n  }\n\n  useEffect(function () {\n    setAuthority(board.userId === JSON.parse(sessionStorage.getItem(\"logined_user\")).userId);\n    axios.get(\"http://localhost:8080/comments/detail/\".concat(board.boardId)).then(function (response) {\n      response.data.map(function (item) {\n        setContent(function (content) {\n          return [].concat(_toConsumableArray(content), [item]);\n        });\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n\n  var onDelete = function onDelete(e) {\n    e.preventDefault();\n    axios.get(\"\".concat(url, \"/delete/\").concat(board.boardId)).then(function (response) {\n      alert(\"삭제가 완료되었습니다.\");\n      history.push(\"/opinion\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentdetaildiv\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentDetailTitle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Title1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, board.boardTitle), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Title2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, board.boardRegdate)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentDetailAuthority\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authority\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"\\uC791\\uC131\\uC790 : \", board.nickname), authority && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentDetailAuthority\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authority2\",\n    sylte: {\n      cursor: \"pointer\"\n    },\n    onClick: function onClick(e) {\n      sessionStorage.setItem(\"opinionEdit\", JSON.stringify(board));\n      history.push(\"/opinion/update\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \"\\uC218\\uC815\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authority3\",\n    style: {\n      cursor: \"pointer\"\n    },\n    onClick: onDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, \"\\uC0AD\\uC81C\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentdetaildiv\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail_content_01\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    dangerouslySetInnerHTML: {\n      __html: board.boardContent\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }))), content.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"commentdiv\",\n      key: item.index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"comment-li\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"comment-row-list\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"comment-row-list-item1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, item.nickname), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"comment-row-list-item2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, item.commentContent), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"comment-row-list-item3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, item.commentRegdate), JSON.parse(sessionStorage.getItem(\"logined_user\")).userId === item.user.userId && /*#__PURE__*/React.createElement(\"li\", {\n      className: \"comment-row-list-item4\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: function onClick(e) {\n        axios.get(\"http://localhost:8080/comments/delete/\".concat(item.commentId)).then(function (response) {\n          alert(\"댓글 삭제가 완료되었습니다.\");\n          window.location.reload();\n        }).catch(function (error) {\n          console.log(error);\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 23\n      }\n    }, \"\\uC0AD\\uC81C\"))));\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"comment_input\",\n    onChange: onChangeComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"comment_button\",\n    onClick: function onClick(e) {\n      var comment = {\n        user: JSON.parse(sessionStorage.getItem(\"logined_user\")),\n        board: board,\n        commentContent: commentContent,\n        nickname: JSON.parse(sessionStorage.getItem(\"logined_user\")).nickname,\n        commentRegdate: getFormatDate(new Date())\n      };\n      axios.post(\"http://localhost:8080/comments/insert\", comment).then(function (response) {\n        window.location.reload();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, \"\\uB313\\uAE00\\uB2EC\\uAE30\")))));\n};\n\nexport default OpinionDetail;","map":{"version":3,"sources":["/Users/boogiewoogie/WebstormProjects/muffin_frontend/src/components/login/opinion/opinionDetail/OpinionDetail.js"],"names":["React","useState","useEffect","useHistory","Navbar","Menu","axios","OpinionDetail","url","JSON","parse","sessionStorage","getItem","board","setBoard","authority","setAuthority","content","setContent","history","commentContent","setCommentContent","onChangeComment","e","target","value","getFormatDate","date","year","getFullYear","month","getMonth","day","getDate","userId","get","boardId","then","response","data","map","item","catch","error","console","log","onDelete","preventDefault","alert","push","boardTitle","boardRegdate","nickname","cursor","setItem","stringify","__html","boardContent","index","commentRegdate","user","commentId","window","location","reload","comment","Date","post"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./opinionDetail.style.css\";\nimport Navbar from \"../../logined_navbar/Navbar\";\nimport Menu from \"../../menu/Menu\";\nimport axios from \"axios\";\n\nconst OpinionDetail = () => {\n  const url = \"http://localhost:8080/boards\";\n  const [board, setBoard] = useState(\n    JSON.parse(sessionStorage.getItem(\"opinionDetail\"))\n  );\n  const [authority, setAuthority] = useState(false);\n  const [content, setContent] = useState([]);\n  const history = useHistory();\n  const [commentContent, setCommentContent] = useState(\"\");\n\n  const onChangeComment = (e) => {\n    setCommentContent(e.target.value);\n  };\n\n  function getFormatDate(date) {\n    var year = date.getFullYear();\n    var month = 1 + date.getMonth();\n    month = month >= 10 ? month : \"0\" + month;\n    var day = date.getDate();\n    day = day >= 10 ? day : \"0\" + day;\n    return year + \"-\" + month + \"-\" + day;\n  }\n\n  useEffect(() => {\n    setAuthority(\n      board.userId === JSON.parse(sessionStorage.getItem(\"logined_user\")).userId\n    );\n    axios\n      .get(`http://localhost:8080/comments/detail/${board.boardId}`)\n      .then((response) => {\n        response.data.map((item) => {\n          setContent((content) => [...content, item]);\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  const onDelete = (e) => {\n    e.preventDefault();\n    axios\n      .get(`${url}/delete/${board.boardId}`)\n      .then((response) => {\n        alert(\"삭제가 완료되었습니다.\");\n        history.push(\"/opinion\");\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"content-container\">\n        <div className=\"wrapper\">\n          <Menu />\n          <div>\n            <div className=\"documentdetaildiv\">\n              <div className=\"documentDetailTitle\">\n                <div className=\"Title1\">{board.boardTitle}</div>\n                <div className=\"Title2\">{board.boardRegdate}</div>\n              </div>\n              <div className=\"documentDetailAuthority\">\n                <div className=\"authority\">작성자 : {board.nickname}</div>\n                {authority && (\n                  <div className=\"documentDetailAuthority\">\n                    <div\n                      className=\"authority2\"\n                      sylte={{ cursor: \"pointer\" }}\n                      onClick={(e) => {\n                        sessionStorage.setItem(\n                          \"opinionEdit\",\n                          JSON.stringify(board)\n                        );\n                        history.push(\"/opinion/update\");\n                      }}\n                    >\n                      수정\n                    </div>\n                    <div\n                      className=\"authority3\"\n                      style={{ cursor: \"pointer\" }}\n                      onClick={onDelete}\n                    >\n                      삭제\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className=\"contentdetaildiv\">\n              <div className=\"detail_content_01\">\n                <span\n                  dangerouslySetInnerHTML={{ __html: board.boardContent }}\n                ></span>\n              </div>\n            </div>\n            {content.map((item) => (\n              <ul className=\"commentdiv\" key={item.index}>\n                <li className=\"comment-li\">\n                  <ul className=\"comment-row-list\">\n                    <li className=\"comment-row-list-item1\">{item.nickname}</li>\n                    <li className=\"comment-row-list-item2\">\n                      {item.commentContent}\n                    </li>\n                    <li className=\"comment-row-list-item3\">\n                      {item.commentRegdate}\n                    </li>\n                    {JSON.parse(sessionStorage.getItem(\"logined_user\"))\n                      .userId === item.user.userId && (\n                      <li\n                        className=\"comment-row-list-item4\"\n                        style={{ cursor: \"pointer\" }}\n                        onClick={(e) => {\n                          axios\n                            .get(\n                              `http://localhost:8080/comments/delete/${item.commentId}`\n                            )\n                            .then((response) => {\n                              alert(\"댓글 삭제가 완료되었습니다.\");\n                              window.location.reload();\n                            })\n                            .catch((error) => {\n                              console.log(error);\n                            });\n                        }}\n                      >\n                        삭제\n                      </li>\n                    )}\n                  </ul>\n                </li>\n              </ul>\n            ))}\n            <input className=\"comment_input\" onChange={onChangeComment} />\n            <button\n              className=\"comment_button\"\n              onClick={(e) => {\n                const comment = {\n                  user: JSON.parse(sessionStorage.getItem(\"logined_user\")),\n                  board: board,\n                  commentContent: commentContent,\n                  nickname: JSON.parse(sessionStorage.getItem(\"logined_user\"))\n                    .nickname,\n                  commentRegdate: getFormatDate(new Date()),\n                };\n                axios\n                  .post(`http://localhost:8080/comments/insert`, comment)\n                  .then((response) => {\n                    window.location.reload();\n                  })\n                  .catch((error) => {\n                    console.log(error);\n                  });\n              }}\n            >\n              댓글달기\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OpinionDetail;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _toConsumableArray from \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/src/components/login/opinion/OpinionList.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport \"./opinionList.style.css\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Navbar } from \"../logined_navbar\";\nimport Menu from \"../menu/Menu\";\nimport axios from \"axios\";\n\nvar OpinionList = function OpinionList() {\n  var url = \"http://localhost:8080/boards\";\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      boardArr = _useState2[0],\n      setBoardArr = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pageArr = _useState4[0],\n      setPageArr = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      prev = _useState6[0],\n      setPrev = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      next = _useState8[0],\n      setNext = _useState8[1];\n\n  var _useState9 = useState(1),\n      _useState10 = _slicedToArray(_useState9, 2),\n      page = _useState10[0],\n      setPage = _useState10[1];\n\n  var _useState11 = useState(1),\n      _useState12 = _slicedToArray(_useState11, 2),\n      range = _useState12[0],\n      setRange = _useState12[1];\n\n  var _useState13 = useState(\"boardTitle\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      condition = _useState14[0],\n      setCondition = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      searchWord = _useState16[0],\n      setSearchWord = _useState16[1];\n\n  var history = useHistory();\n\n  var onChangeCondition = function onChangeCondition(e) {\n    setCondition(e.target.value);\n  };\n\n  var onChangeSearch = function onChangeSearch(e) {\n    setSearchWord(e.target.value);\n  };\n\n  var clickNext = function clickNext() {\n    getAll(pageArr[0] + 5, range + 1);\n  };\n\n  var clickPrev = function clickPrev() {\n    getAll(pageArr[0] - 1, range - 1);\n  };\n\n  var searchPage = function searchPage(page, range) {\n    setPage(page);\n    setRange(range);\n    setPageArr([]);\n    setBoardArr([]);\n    axios.get(\"\".concat(url, \"/search/\").concat(searchWord, \"/\").concat(condition, \"/\").concat(page, \"/\").concat(range)).then(function (response) {\n      response.data.list.map(function (item) {\n        setBoardArr(function (boardArr) {\n          return [].concat(_toConsumableArray(boardArr), [item]);\n        });\n      });\n      var i = 0;\n      var startPage = response.data.pagination.startPage;\n\n      if (response.data.pagination.pageCnt < startPage + response.data.pagination.rangeSize) {\n        for (i; i < response.data.pagination.pageCnt - startPage + 1; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      } else {\n        for (i; i < response.data.pagination.rangeSize; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      }\n\n      setPrev(response.data.pagination.prev);\n      setNext(response.data.pagination.next);\n    }).catch(function (error) {\n      return console.log(\"실패\");\n    });\n  };\n\n  var getAll = function getAll(page, range) {\n    setPage(page);\n    setRange(range);\n    setPageArr([]);\n    setBoardArr([]);\n    axios.get(\"\".concat(url, \"/pagination/\").concat(page, \"/\").concat(range)).then(function (response) {\n      console.log(response.data);\n      response.data.list.map(function (item) {\n        setBoardArr(function (boardArr) {\n          return [].concat(_toConsumableArray(boardArr), [item]);\n        });\n      });\n      var i = 0;\n      var startPage = response.data.pagination.startPage;\n\n      if (response.data.pagination.pageCnt < startPage + response.data.pagination.rangeSize) {\n        for (i; i < response.data.pagination.pageCnt - startPage + 1; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      } else {\n        for (i; i < response.data.pagination.rangeSize; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      }\n\n      setPrev(response.data.pagination.prev);\n      setNext(response.data.pagination.next);\n    }).catch(function (err) {\n      return console.log(\"실패\");\n    });\n  };\n\n  var search = function search(e) {\n    setPageArr([]);\n    setBoardArr([]);\n    e.preventDefault();\n    axios.get(\"\".concat(url, \"/search/\").concat(searchWord, \"/\").concat(condition, \"/1/1\")).then(function (response) {\n      response.data.list.map(function (item) {\n        setBoardArr(function (boardArr) {\n          return [].concat(_toConsumableArray(boardArr), [item]);\n        });\n      });\n      var i = 0;\n      var startPage = response.data.pagination.startPage;\n\n      if (response.data.pagination.pageCnt < startPage + response.data.pagination.rangeSize) {\n        for (i; i < response.data.pagination.pageCnt - startPage + 1; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      } else {\n        for (i; i < response.data.pagination.rangeSize; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      }\n\n      setPrev(response.data.pagination.prev);\n      setNext(response.data.pagination.next);\n    }).catch(function (error) {\n      return console.log(\"실패\");\n    });\n  };\n\n  useEffect(function () {\n    getAll(1, 1);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentroom_container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentroom_text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"\\uC624\\uD53C\\uB2C8\\uC5B8\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentroom_table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table_head\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table_head_text1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, \"No.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table_head_text2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, \"\\uC81C\\uBAA9\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table_head_text3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"\\uC791\\uC131\\uC790\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table_head_text4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, \"\\uB4F1\\uB85D\\uB0A0\\uC9DC\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table_head_text4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"\\uC870\\uD68C\\uC218\")), boardArr.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      key: item.index,\n      className: \"post-ul\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"post-li\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"post-row-list\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"post-row-list-item1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, item.boardId), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"post-row-list-item2\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        var boardJson = {\n          boardId: item.boardId,\n          userId: item.userId,\n          boardTitle: item.boardTitle,\n          boardContent: item.boardContent,\n          boardRegdate: item.boardRegdate,\n          nickname: item.nickname,\n          viewCnt: item.viewCnt + 1,\n          commentList: item.commentList\n        };\n        axios.post(\"\".concat(url, \"/update\"), boardJson).then(function (response) {\n          console.log(boardJson);\n          sessionStorage.setItem(\"opinionDetail\", JSON.stringify(boardJson));\n          history.push(\"/opinion/detail\");\n        }).catch(function (error) {\n          console.log(\"실패\");\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }, item.boardTitle), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"post-row-list-item3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, item.nickname), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"post-row-list-item4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, item.boardRegdate), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"post-row-list-item5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, item.viewCnt))));\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/opinion/write\",\n    className: \"write_button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, \"\\uAE00\\uC4F0\\uAE30\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pagination-div\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pagination\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, prev && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page_button\",\n    id: \"prev\",\n    onClick: clickPrev,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, \"\\uC774\\uC804\"), pageArr.map(function (pagenum) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page_button\",\n      key: pagenum,\n      onClick: function onClick() {\n        if (searchWord === \"\") {\n          getAll(pagenum, range);\n        } else {\n          searchPage(pagenum, range);\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }, pagenum);\n  }), next && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page_button\",\n    id: \"next\",\n    onClick: clickNext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 21\n    }\n  }, \"\\uB2E4\\uC74C\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conference_search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"search_select\",\n    onChange: onChangeCondition,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    className: \"search_option\",\n    value: \"boardTitle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 19\n    }\n  }, \"\\uC81C\\uBAA9\"), /*#__PURE__*/React.createElement(\"option\", {\n    className: \"search_option\",\n    value: \"nickname\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 19\n    }\n  }, \"\\uC791\\uC131\\uC790\")), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"\\uC81C\\uBAA9\\uC774\\uB098 \\uC791\\uC131\\uC790\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n    className: \"search_input\",\n    value: searchWord,\n    onChange: onChangeSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      cursor: \"pointer\"\n    },\n    className: \"search_button\",\n    onClick: search,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }, \"\\uAC80\\uC0C9\")))))));\n};\n\nexport default OpinionList;","map":{"version":3,"sources":["/Users/boogiewoogie/WebstormProjects/muffin_frontend/src/components/login/opinion/OpinionList.js"],"names":["React","useState","useEffect","Link","useHistory","Navbar","Menu","axios","OpinionList","url","boardArr","setBoardArr","pageArr","setPageArr","prev","setPrev","next","setNext","page","setPage","range","setRange","condition","setCondition","searchWord","setSearchWord","history","onChangeCondition","e","target","value","onChangeSearch","clickNext","getAll","clickPrev","searchPage","get","then","response","data","list","map","item","i","startPage","pagination","pageCnt","rangeSize","catch","error","console","log","err","search","preventDefault","index","boardId","cursor","boardJson","userId","boardTitle","boardContent","boardRegdate","nickname","viewCnt","commentList","post","sessionStorage","setItem","JSON","stringify","push","pagenum"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./opinionList.style.css\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Navbar } from \"../logined_navbar\";\nimport Menu from \"../menu/Menu\";\nimport axios from \"axios\";\n\nconst OpinionList = () => {\n  const url = \"http://localhost:8080/boards\";\n  const [boardArr, setBoardArr] = useState([]);\n  const [pageArr, setPageArr] = useState([]);\n  const [prev, setPrev] = useState(false);\n  const [next, setNext] = useState(false);\n  const [page, setPage] = useState(1);\n  const [range, setRange] = useState(1);\n  const [condition, setCondition] = useState(\"boardTitle\");\n  const [searchWord, setSearchWord] = useState(\"\");\n  const history = useHistory();\n\n  const onChangeCondition = (e) => {\n    setCondition(e.target.value);\n  };\n\n  const onChangeSearch = (e) => {\n    setSearchWord(e.target.value);\n  };\n\n  const clickNext = () => {\n    getAll(pageArr[0] + 5, range + 1);\n  };\n\n  const clickPrev = () => {\n    getAll(pageArr[0] - 1, range - 1);\n  };\n\n  const searchPage = (page, range) => {\n    setPage(page);\n    setRange(range);\n    setPageArr([]);\n    setBoardArr([]);\n    axios\n      .get(`${url}/search/${searchWord}/${condition}/${page}/${range}`)\n      .then((response) => {\n        response.data.list.map((item) => {\n          setBoardArr((boardArr) => [...boardArr, item]);\n        });\n        let i = 0;\n        const startPage = response.data.pagination.startPage;\n        if (\n          response.data.pagination.pageCnt <\n          startPage + response.data.pagination.rangeSize\n        ) {\n          for (i; i < response.data.pagination.pageCnt - startPage + 1; i++)\n            setPageArr((pageArr) => [...pageArr, startPage + i]);\n        } else {\n          for (i; i < response.data.pagination.rangeSize; i++)\n            setPageArr((pageArr) => [...pageArr, startPage + i]);\n        }\n        setPrev(response.data.pagination.prev);\n        setNext(response.data.pagination.next);\n      })\n      .catch((error) => console.log(\"실패\"));\n  };\n\n  const getAll = (page, range) => {\n    setPage(page);\n    setRange(range);\n    setPageArr([]);\n    setBoardArr([]);\n    axios\n      .get(`${url}/pagination/${page}/${range}`)\n      .then((response) => {\n        console.log(response.data);\n        response.data.list.map((item) => {\n          setBoardArr((boardArr) => [...boardArr, item]);\n        });\n        let i = 0;\n        const startPage = response.data.pagination.startPage;\n        if (\n          response.data.pagination.pageCnt <\n          startPage + response.data.pagination.rangeSize\n        ) {\n          for (i; i < response.data.pagination.pageCnt - startPage + 1; i++)\n            setPageArr((pageArr) => [...pageArr, startPage + i]);\n        } else {\n          for (i; i < response.data.pagination.rangeSize; i++)\n            setPageArr((pageArr) => [...pageArr, startPage + i]);\n        }\n        setPrev(response.data.pagination.prev);\n        setNext(response.data.pagination.next);\n      })\n      .catch((err) => console.log(\"실패\"));\n  };\n\n  const search = (e) => {\n    setPageArr([]);\n    setBoardArr([]);\n    e.preventDefault();\n    axios\n      .get(`${url}/search/${searchWord}/${condition}/1/1`)\n      .then((response) => {\n        response.data.list.map((item) => {\n          setBoardArr((boardArr) => [...boardArr, item]);\n        });\n        let i = 0;\n        const startPage = response.data.pagination.startPage;\n        if (\n          response.data.pagination.pageCnt <\n          startPage + response.data.pagination.rangeSize\n        ) {\n          for (i; i < response.data.pagination.pageCnt - startPage + 1; i++)\n            setPageArr((pageArr) => [...pageArr, startPage + i]);\n        } else {\n          for (i; i < response.data.pagination.rangeSize; i++)\n            setPageArr((pageArr) => [...pageArr, startPage + i]);\n        }\n        setPrev(response.data.pagination.prev);\n        setNext(response.data.pagination.next);\n      })\n      .catch((error) => console.log(\"실패\"));\n  };\n\n  useEffect(() => {\n    getAll(1, 1);\n  }, []);\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"content-container\">\n        <div className=\"wrapper\">\n          <Menu />\n          <div>\n            <div className=\"documentroom_container\">\n              <div className=\"documentroom_text\">오피니언</div>\n\n              <div className=\"documentroom_table\">\n                <div className=\"table_head\">\n                  <div className=\"table_head_text1\">No.</div>\n                  <div className=\"table_head_text2\">제목</div>\n                  <div className=\"table_head_text3\">작성자</div>\n                  <div className=\"table_head_text4\">등록날짜</div>\n                  <div className=\"table_head_text4\">조회수</div>\n                </div>\n\n                {boardArr.map((item) => (\n                  <ul key={item.index} className=\"post-ul\">\n                    <li className=\"post-li\">\n                      <ul className=\"post-row-list\">\n                        <li className=\"post-row-list-item1\">{item.boardId}</li>\n                        <li\n                          className=\"post-row-list-item2\"\n                          style={{ cursor: \"pointer\" }}\n                          onClick={() => {\n                            const boardJson = {\n                              boardId: item.boardId,\n                              userId: item.userId,\n                              boardTitle: item.boardTitle,\n                              boardContent: item.boardContent,\n                              boardRegdate: item.boardRegdate,\n                              nickname: item.nickname,\n                              viewCnt: item.viewCnt + 1,\n                              commentList: item.commentList,\n                            };\n                            axios\n                              .post(`${url}/update`, boardJson)\n                              .then((response) => {\n                                console.log(boardJson);\n                                sessionStorage.setItem(\n                                  \"opinionDetail\",\n                                  JSON.stringify(boardJson)\n                                );\n                                history.push(\"/opinion/detail\");\n                              })\n                              .catch((error) => {\n                                console.log(\"실패\");\n                              });\n                          }}\n                        >\n                          {item.boardTitle}\n                        </li>\n\n                        <li className=\"post-row-list-item3\">{item.nickname}</li>\n                        <li className=\"post-row-list-item4\">\n                          {item.boardRegdate}\n                        </li>\n                        <li className=\"post-row-list-item5\">{item.viewCnt}</li>\n                      </ul>\n                    </li>\n                  </ul>\n                ))}\n\n                <Link to=\"/opinion/write\" className=\"write_button\">\n                  글쓰기\n                </Link>\n              </div>\n\n              <div className=\"pagination-div\">\n                <div className=\"pagination\">\n                  {prev && (\n                    <div className=\"page_button\" id=\"prev\" onClick={clickPrev}>\n                      이전\n                    </div>\n                  )}\n\n                  {pageArr.map((pagenum) => (\n                    <div\n                      className=\"page_button\"\n                      key={pagenum}\n                      onClick={() => {\n                        if (searchWord === \"\") {\n                          getAll(pagenum, range);\n                        } else {\n                          searchPage(pagenum, range);\n                        }\n                      }}\n                    >\n                      {pagenum}\n                    </div>\n                  ))}\n\n                  {next && (\n                    <div className=\"page_button\" id=\"next\" onClick={clickNext}>\n                      다음\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"conference_search\">\n                <select className=\"search_select\" onChange={onChangeCondition}>\n                  <option className=\"search_option\" value=\"boardTitle\">\n                    제목\n                  </option>\n                  <option className=\"search_option\" value=\"nickname\">\n                    작성자\n                  </option>\n                </select>\n\n                <input\n                  placeholder=\"제목이나 작성자를 입력하세요\"\n                  className=\"search_input\"\n                  value={searchWord}\n                  onChange={onChangeSearch}\n                />\n                <div\n                  style={{ cursor: \"pointer\" }}\n                  className=\"search_button\"\n                  onClick={search}\n                >\n                  검색\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OpinionList;\n"]},"metadata":{},"sourceType":"module"}
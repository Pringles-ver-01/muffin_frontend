{"ast":null,"code":"import _toConsumableArray from \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/boogiewoogie/WebstormProjects/muffin_frontend/src/components/login/stocks/StockList.js\";\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./stockList.css\";\nimport { ModalBuying, ModalSelling } from \"../items\";\nimport Navbar from \"../logined_navbar/Navbar\";\nimport Menu from \"../menu/Menu\";\nimport { AssetContext, StockContext } from \"../../../context\";\n\nvar StockList = function StockList() {\n  var _useContext = useContext(AssetContext),\n      asset = _useContext.asset,\n      setAsset = _useContext.setAsset;\n\n  var _useContext2 = useContext(StockContext),\n      crawledStock = _useContext2.crawledStock,\n      setCrawledStock = _useContext2.setCrawledStock;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      owenedAsset = _useState2[0],\n      setOwenedAsset = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      contextStock = _useState4[0],\n      setContextStock = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      buyOpen = _useState6[0],\n      setBuyOpen = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sellOpen = _useState8[0],\n      setSellOpen = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      matchedUserStocks = _useState10[0],\n      setMatechedUserStock = _useState10[1];\n\n  var _useState11 = useState({}),\n      _useState12 = _slicedToArray(_useState11, 2),\n      stockList = _useState12[0],\n      setStockList = _useState12[1];\n\n  var showDetail = function showDetail() {};\n\n  var matchedUserAsset = function matchedUserAsset(crawledOneStock) {\n    for (var i = 0; i < asset.length; i++) {\n      console.log(crawledStock[i]);\n      console.log(bill[i]);\n      console.log(asset[i]);\n\n      if (asset[i].stockName === crawledStock[i].stockName) {\n        setMatechedUserStock(asset[i]);\n        console.log(matchedUserAsset(i));\n      }\n    }\n  }; // pagination\n\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      pageArr = _useState14[0],\n      setPageArr = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      prev = _useState16[0],\n      setPrev = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      next = _useState18[0],\n      setNext = _useState18[1];\n\n  var _useState19 = useState(1),\n      _useState20 = _slicedToArray(_useState19, 2),\n      page = _useState20[0],\n      setPage = _useState20[1];\n\n  var _useState21 = useState(1),\n      _useState22 = _slicedToArray(_useState21, 2),\n      range = _useState22[0],\n      setRange = _useState22[1];\n\n  var clickNext = function clickNext() {\n    getAll(pageArr[0] + 5, range + 1);\n  };\n\n  var clickPrev = function clickPrev() {\n    getAll(pageArr[0] - 1, range - 1);\n  };\n\n  var getAll = function getAll(page, range) {\n    setPage(page);\n    setRange(range);\n    setPageArr([]);\n    setCrawledStock([]);\n    axios.get(\"http://localhost:8080/stocks/pagination/\".concat(page, \"/\").concat(range)).then(function (response) {\n      response.data.list.map(function (item) {\n        setCrawledStock(function (crawledStock) {\n          return [].concat(_toConsumableArray(crawledStock), [item]);\n        });\n      });\n      var i = 0;\n      var startPage = response.data.pagination.startPage;\n      var endPage = response.data.pagination.endPage;\n\n      if (response.data.pagination.pageCnt < startPage + response.data.pagination.rangeSize) {\n        for (i; i < response.data.pagination.pageCnt - startPage + 1; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      } else {\n        for (i; i < response.data.pagination.rangeSize; i++) {\n          setPageArr(function (pageArr) {\n            return [].concat(_toConsumableArray(pageArr), [startPage + i]);\n          });\n        }\n      }\n\n      setPrev(response.data.pagination.prev);\n      setNext(response.data.pagination.next);\n    }).catch(function (error) {\n      throw error;\n    });\n  };\n\n  useEffect(function () {\n    getAll(1, 1);\n  }, []);\n  useEffect(function () {\n    axios.get(\"http://localhost:8080/assets/holdingCount/\".concat(JSON.parse(sessionStorage.getItem(\"logined_user\")).userId)).then(function (response) {\n      setAsset(response.data.holdingCount);\n    }).catch(function (error) {\n      throw error;\n    });\n  }, []);\n\n  var linkToDetail = function linkToDetail(e) {\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentroom_container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"documentroom_text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"\\uD22C\\uC790\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full p-4 mb-4 rounded-lg bg-white border border-grey-100 dark:bg-dark-95 dark:border-dark-90\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table documentroom_table w-full\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, \"\\uC885\\uBAA9\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }, \"\\uC2DC\\uC138\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, \"\\uC804\\uC77C\\uBE44\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, \"\\uC2DC\\uAC00 \\uCD1D\\uC561\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, \"\\uAC70\\uB798\\uB7C9\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, \"\\uAC70\\uB798\\uD558\\uAE30\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, crawledStock[0] && crawledStock.map(function (crawledOneStock) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/stock/detail/\".concat(crawledOneStock.symbol),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      onClick: function onClick() {\n        showDetail(crawledOneStock.stockName);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 23\n      }\n    }, crawledOneStock.stockName)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, crawledOneStock.now), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, crawledOneStock.dod), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, crawledOneStock.transacAmount), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, crawledOneStock.volume), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-default btn-blue text-white btn-rounded\",\n      onClick: function onClick(e) {\n        e.preventDefault();\n        setStockList(crawledOneStock);\n        matchedUserAsset(crawledOneStock);\n        setBuyOpen(true);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 23\n      }\n    }, \"\\uB9E4\\uC218\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-default btn-red text-white btn-rounded\",\n      onClick: function onClick(e) {\n        e.preventDefault();\n        setSellOpen(true);\n        setBill(crawledOneStock);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 23\n      }\n    }, \"\\uB9E4\\uB3C4\")));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pagination-div\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pagination\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, prev && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page_button\",\n    id: \"prev\",\n    onClick: clickPrev,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, \"\\uC774\\uC804\"), pageArr.map(function (pagenum) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page_button\",\n      key: pagenum,\n      onClick: function onClick() {\n        getAll(pagenum, range);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, pagenum);\n  }), next && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page_button\",\n    id: \"next\",\n    onClick: clickNext,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, \"\\uB2E4\\uC74C\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"conference_search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"\\uC8FC\\uC2DD \\uC885\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    className: \"search_input\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"\",\n    className: \"search_button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, \"\\uAC80\\uC0C9\")))), buyOpen && /*#__PURE__*/React.createElement(ModalBuying, {\n    matchedUserStocks: matchedUserStocks,\n    crawledStock: stockList,\n    assetOne: owenedAsset,\n    isOpen: buyOpen,\n    isClose: function isClose() {\n      return setBuyOpen(false);\n    },\n    ariaHideApp: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }), sellOpen && /*#__PURE__*/React.createElement(ModalSelling, {\n    crawledStock: bill,\n    assetOne: bill,\n    isOpen: sellOpen,\n    isClose: function isClose() {\n      return setSellOpen(false);\n    },\n    ariaHideApp: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default StockList;","map":{"version":3,"sources":["/Users/boogiewoogie/WebstormProjects/muffin_frontend/src/components/login/stocks/StockList.js"],"names":["React","useState","useEffect","useContext","Link","useHistory","axios","ModalBuying","ModalSelling","Navbar","Menu","AssetContext","StockContext","StockList","asset","setAsset","crawledStock","setCrawledStock","owenedAsset","setOwenedAsset","contextStock","setContextStock","buyOpen","setBuyOpen","sellOpen","setSellOpen","matchedUserStocks","setMatechedUserStock","stockList","setStockList","showDetail","matchedUserAsset","crawledOneStock","i","length","console","log","bill","stockName","pageArr","setPageArr","prev","setPrev","next","setNext","page","setPage","range","setRange","clickNext","getAll","clickPrev","get","then","response","data","list","map","item","startPage","pagination","endPage","pageCnt","rangeSize","catch","error","JSON","parse","sessionStorage","getItem","userId","holdingCount","linkToDetail","e","preventDefault","symbol","now","dod","transacAmount","volume","setBill","pagenum"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useContext} from \"react\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./stockList.css\";\nimport {ModalBuying, ModalSelling} from \"../items\";\nimport Navbar from \"../logined_navbar/Navbar\";\nimport Menu from \"../menu/Menu\";\nimport {AssetContext, StockContext} from \"../../../context\";\n\nconst StockList = () => {\n  const {asset, setAsset} = useContext(AssetContext);\n  const {crawledStock, setCrawledStock} = useContext(StockContext);\n  const [owenedAsset, setOwenedAsset] = useState({});\n  const [contextStock, setContextStock] = useState({});\n  const [buyOpen, setBuyOpen] = useState(false);\n  const [sellOpen, setSellOpen] = useState(false);\n  const [matchedUserStocks, setMatechedUserStock] = useState({});\n\n  const [stockList, setStockList] = useState({});\n  const showDetail = () => {\n  };\n\n  const matchedUserAsset = (crawledOneStock) => {\n    for (let i = 0; i < asset.length; i++) {\n      console.log(crawledStock[i])\n      console.log(bill[i])\n      console.log(asset[i])\n      if (asset[i].stockName === crawledStock[i].stockName) {\n        setMatechedUserStock(asset[i]);\n        console.log(matchedUserAsset(i));\n      }\n    }\n  }\n\n  // pagination\n  const [pageArr, setPageArr] = useState([])\n  const [prev, setPrev] = useState(false)\n  const [next, setNext] = useState(false)\n  const [page, setPage] = useState(1)\n  const [range, setRange] = useState(1)\n\n  const clickNext = () => {\n    getAll(pageArr[0] + 5, range + 1)\n  }\n  const clickPrev = () => {\n    getAll(pageArr[0] - 1, range - 1)\n  }\n\n  const getAll = (page, range) => {\n    setPage(page);\n    setRange(range);\n    setPageArr([]);\n    setCrawledStock([]);\n    axios\n      .get(`http://localhost:8080/stocks/pagination/${page}/${range}`)\n      .then((response) => {\n          response.data.list.map((item) => {\n            setCrawledStock((crawledStock) => [...crawledStock, item]);\n          })\n          let i = 0\n          const startPage = response.data.pagination.startPage\n          const endPage = response.data.pagination.endPage\n          if (\n            response.data.pagination.pageCnt < startPage + response.data.pagination.rangeSize\n          ) {\n            for (i; i < response.data.pagination.pageCnt - startPage + 1; i++)\n              setPageArr((pageArr) => [...pageArr, startPage + i])\n          } else {\n            for (i; i < response.data.pagination.rangeSize; i++)\n              setPageArr((pageArr) => [...pageArr, startPage + i])\n          }\n          setPrev(response.data.pagination.prev)\n          setNext(response.data.pagination.next)\n        }\n      )\n      .catch((error) => {\n        throw error\n      })\n  }\n  useEffect(() => {\n    getAll(1, 1)\n  }, [])\n\n\n\n  useEffect(() => {\n    axios\n      .get(`http://localhost:8080/assets/holdingCount/${JSON.parse(sessionStorage.getItem(\"logined_user\")).userId}`)\n      .then((response) => {\n        setAsset(response.data.holdingCount);\n      })\n      .catch((error) => {\n        throw error;\n      });\n  }, []);\n\n  const linkToDetail = (e) => {\n    e.preventDefault();\n  };\n\n  return (\n    <>\n      <Navbar/>\n      <div className=\"content-container\">\n        <div className=\"wrapper\">\n          <Menu/>\n\n          <div className=\"documentroom_container\">\n            <div className=\"documentroom_text\">투자</div>\n            <div\n              className=\"w-full p-4 mb-4 rounded-lg bg-white border border-grey-100 dark:bg-dark-95 dark:border-dark-90\">\n              <table className=\"table documentroom_table w-full\">\n                <thead>\n                <tr>\n                  <th>종목</th>\n                  <th>시세</th>\n                  <th>전일비</th>\n                  <th>시가 총액</th>\n                  <th>거래량</th>\n                  <th>거래하기</th>\n                </tr>\n                </thead>\n                <tbody>\n                {crawledStock[0] && crawledStock.map((crawledOneStock) => (\n                  <tr>\n                    <Link to={`/stock/detail/${crawledOneStock.symbol}`}>\n                      <td onClick={() => {\n                        showDetail(crawledOneStock.stockName)\n                      }}>{crawledOneStock.stockName}</td>\n                    </Link>\n                    <td>{crawledOneStock.now}</td>\n                    <td>{crawledOneStock.dod}</td>\n                    <td>{crawledOneStock.transacAmount}</td>\n                    <td>{crawledOneStock.volume}</td>\n                    <td>\n                      <button\n                        className=\"btn btn-default btn-blue text-white btn-rounded\"\n                        onClick={e => {\n                          e.preventDefault();\n                          setStockList(crawledOneStock);\n\n                          matchedUserAsset(crawledOneStock);\n                          setBuyOpen(true);\n                        }}>\n                        매수\n                      </button>\n                      <button\n                        className=\"btn btn-default btn-red text-white btn-rounded\"\n                        onClick={e => {\n                          e.preventDefault();\n                          setSellOpen(true);\n                          setBill(crawledOneStock);\n                        }}\n                      >\n                        매도\n                      </button>\n                    </td>\n                  </tr>\n\n                ))}\n                </tbody>\n              </table>\n              <div className=\"pagination-div\">\n                <div className=\"pagination\">\n                  {prev && (\n                    <div className=\"page_button\" id=\"prev\" onClick={clickPrev}>\n                      이전\n                    </div>\n                  )}\n\n                  {pageArr.map((pagenum) => (\n                    <div\n                      className=\"page_button\"\n                      key={pagenum}\n                      onClick={() => {\n                        getAll(pagenum, range);\n                      }}\n                    >\n                      {pagenum}\n                    </div>\n                  ))}\n\n                  {next && (\n                    <div className=\"page_button\" id=\"next\" onClick={clickNext}>\n                      다음\n                    </div>\n                  )}\n                </div>\n              </div>\n              <div className=\"conference_search\">\n                <input\n                  placeholder=\"주식 종목을 입력해주세요.\"\n                  className=\"search_input\"\n                />\n                <Link to=\"\" className=\"search_button\">\n                  검색\n                </Link>\n              </div>\n            </div>\n          </div>\n          {buyOpen &&\n          <ModalBuying matchedUserStocks={matchedUserStocks} crawledStock={stockList} assetOne={owenedAsset} isOpen={buyOpen}\n                       isClose={() => setBuyOpen(false)} ariaHideApp={false}/>}\n          {sellOpen &&\n          <ModalSelling crawledStock={bill} assetOne={bill} isOpen={sellOpen} isClose={() => setSellOpen(false)}\n                        ariaHideApp={false}/>}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default StockList;\n"]},"metadata":{},"sourceType":"module"}
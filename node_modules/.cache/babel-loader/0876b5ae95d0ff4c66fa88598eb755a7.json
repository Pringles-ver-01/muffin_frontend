{"ast":null,"code":"export var getHTMLMediaElement = function getHTMLMediaElement(mediaElement, config) {\n  config = config || {};\n\n  if (!mediaElement.nodeName || mediaElement.nodeName.toLowerCase() !== \"audio\" && mediaElement.nodeName.toLowerCase() !== \"video\") {\n    if (!mediaElement.getVideoTracks().length) {\n      return getAudioElement(mediaElement, config);\n    }\n\n    var mediaStream = mediaElement;\n    mediaElement = document.createElement(mediaStream.getVideoTracks().length ? \"video\" : \"audio\");\n\n    try {\n      mediaElement.setAttributeNode(document.createAttribute(\"autoplay\"));\n      mediaElement.setAttributeNode(document.createAttribute(\"playsinline\"));\n    } catch (e) {\n      mediaElement.setAttribute(\"autoplay\", true);\n      mediaElement.setAttribute(\"playsinline\", true);\n    }\n\n    if (\"srcObject\" in mediaElement) {\n      mediaElement.srcObject = mediaStream;\n    } else {\n      mediaElement[!!navigator.mozGetUserMedia ? \"mozSrcObject\" : \"src\"] = !!navigator.mozGetUserMedia ? mediaStream : (window.URL || window.webkitURL).createObjectURL(mediaStream);\n    }\n  }\n\n  if (mediaElement.nodeName && mediaElement.nodeName.toLowerCase() === \"audio\") {\n    return getAudioElement(mediaElement, config);\n  }\n\n  var buttons = config.buttons || [\"mute-audio\", \"mute-video\", \"full-screen\", \"volume-slider\", \"stop\"];\n\n  buttons.has = function (element) {\n    return buttons.indexOf(element) !== -1;\n  };\n\n  config.toggle = config.toggle || [];\n\n  config.toggle.has = function (element) {\n    return config.toggle.indexOf(element) !== -1;\n  };\n\n  var mediaElementContainer = document.createElement(\"div\");\n  mediaElementContainer.className = \"media-container\";\n  var mediaControls = document.createElement(\"div\");\n  mediaControls.className = \"media-controls\";\n  mediaElementContainer.appendChild(mediaControls);\n\n  if (buttons.has(\"mute-audio\")) {\n    var muteAudio = document.createElement(\"div\");\n    muteAudio.className = \"control \" + (config.toggle.has(\"mute-audio\") ? \"unmute-audio selected\" : \"mute-audio\");\n    mediaControls.appendChild(muteAudio);\n\n    muteAudio.onclick = function () {\n      if (muteAudio.className.indexOf(\"unmute-audio\") !== -1) {\n        muteAudio.className = muteAudio.className.replace(\"unmute-audio selected\", \"mute-audio\");\n        mediaElement.muted = false;\n        mediaElement.volume = 1;\n        if (config.onUnMuted) config.onUnMuted(\"audio\");\n      } else {\n        muteAudio.className = muteAudio.className.replace(\"mute-audio\", \"unmute-audio selected\");\n        mediaElement.muted = true;\n        mediaElement.volume = 0;\n        if (config.onMuted) config.onMuted(\"audio\");\n      }\n    };\n  }\n\n  if (buttons.has(\"mute-video\")) {\n    var muteVideo = document.createElement(\"div\");\n    muteVideo.className = \"control \" + (config.toggle.has(\"mute-video\") ? \"unmute-video selected\" : \"mute-video\");\n    mediaControls.appendChild(muteVideo);\n\n    muteVideo.onclick = function () {\n      if (muteVideo.className.indexOf(\"unmute-video\") !== -1) {\n        muteVideo.className = muteVideo.className.replace(\"unmute-video selected\", \"mute-video\");\n        mediaElement.muted = false;\n        mediaElement.volume = 1;\n        mediaElement.play();\n        if (config.onUnMuted) config.onUnMuted(\"video\");\n      } else {\n        muteVideo.className = muteVideo.className.replace(\"mute-video\", \"unmute-video selected\");\n        mediaElement.muted = true;\n        mediaElement.volume = 0;\n        mediaElement.pause();\n        if (config.onMuted) config.onMuted(\"video\");\n      }\n    };\n  }\n\n  if (buttons.has(\"take-snapshot\")) {\n    var takeSnapshot = document.createElement(\"div\");\n    takeSnapshot.className = \"control take-snapshot\";\n    mediaControls.appendChild(takeSnapshot);\n\n    takeSnapshot.onclick = function () {\n      if (config.onTakeSnapshot) config.onTakeSnapshot();\n    };\n  }\n\n  if (buttons.has(\"stop\")) {\n    var stop = document.createElement(\"div\");\n    stop.className = \"control stop\";\n    mediaControls.appendChild(stop);\n\n    stop.onclick = function () {\n      mediaElementContainer.style.opacity = 0;\n      setTimeout(function () {\n        if (mediaElementContainer.parentNode) {\n          mediaElementContainer.parentNode.removeChild(mediaElementContainer);\n        }\n      }, 800);\n      if (config.onStopped) config.onStopped();\n    };\n  }\n\n  var volumeControl = document.createElement(\"div\");\n  volumeControl.className = \"volume-control\";\n\n  if (buttons.has(\"record-audio\")) {\n    var recordAudio = document.createElement(\"div\");\n    recordAudio.className = \"control \" + (config.toggle.has(\"record-audio\") ? \"stop-recording-audio selected\" : \"record-audio\");\n    volumeControl.appendChild(recordAudio);\n\n    recordAudio.onclick = function () {\n      if (recordAudio.className.indexOf(\"stop-recording-audio\") !== -1) {\n        recordAudio.className = recordAudio.className.replace(\"stop-recording-audio selected\", \"record-audio\");\n        if (config.onRecordingStopped) config.onRecordingStopped(\"audio\");\n      } else {\n        recordAudio.className = recordAudio.className.replace(\"record-audio\", \"stop-recording-audio selected\");\n        if (config.onRecordingStarted) config.onRecordingStarted(\"audio\");\n      }\n    };\n  }\n\n  if (buttons.has(\"record-video\")) {\n    var recordVideo = document.createElement(\"div\");\n    recordVideo.className = \"control \" + (config.toggle.has(\"record-video\") ? \"stop-recording-video selected\" : \"record-video\");\n    volumeControl.appendChild(recordVideo);\n\n    recordVideo.onclick = function () {\n      if (recordVideo.className.indexOf(\"stop-recording-video\") !== -1) {\n        recordVideo.className = recordVideo.className.replace(\"stop-recording-video selected\", \"record-video\");\n        if (config.onRecordingStopped) config.onRecordingStopped(\"video\");\n      } else {\n        recordVideo.className = recordVideo.className.replace(\"record-video\", \"stop-recording-video selected\");\n        if (config.onRecordingStarted) config.onRecordingStarted(\"video\");\n      }\n    };\n  }\n\n  if (buttons.has(\"volume-slider\")) {\n    var volumeSlider = document.createElement(\"div\");\n    volumeSlider.className = \"control volume-slider\";\n    volumeControl.appendChild(volumeSlider);\n    var slider = document.createElement(\"input\");\n    slider.type = \"range\";\n    slider.min = 0;\n    slider.max = 100;\n    slider.value = 100;\n\n    slider.onchange = function () {\n      mediaElement.volume = \".\" + slider.value.toString().substr(0, 1);\n    };\n\n    volumeSlider.appendChild(slider);\n  }\n\n  if (buttons.has(\"full-screen\")) {\n    var launchFullscreen = function launchFullscreen(element) {\n      if (element.requestFullscreen) {\n        element.requestFullscreen();\n      } else if (element.mozRequestFullScreen) {\n        element.mozRequestFullScreen();\n      } else if (element.webkitRequestFullscreen) {\n        element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      }\n    };\n\n    var exitFullScreen = function exitFullScreen() {\n      if (document.fullscreen) {\n        document.cancelFullScreen();\n      }\n\n      if (document.mozFullScreen) {\n        document.mozCancelFullScreen();\n      }\n\n      if (document.webkitIsFullScreen) {\n        document.webkitCancelFullScreen();\n      }\n    };\n\n    var screenStateChange = function screenStateChange(e) {\n      if (e.srcElement !== mediaElementContainer) return;\n      var isFullScreeMode = document.webkitIsFullScreen || document.mozFullScreen || document.fullscreen;\n      mediaElementContainer.style.width = (isFullScreeMode ? window.innerWidth - 20 : config.width) + \"px\";\n      mediaElementContainer.style.display = isFullScreeMode ? \"block\" : \"inline-block\";\n\n      if (config.height) {\n        mediaBox.style.height = (isFullScreeMode ? window.innerHeight - 20 : config.height) + \"px\";\n      }\n\n      if (!isFullScreeMode && config.onZoomout) config.onZoomout();\n      if (isFullScreeMode && config.onZoomin) config.onZoomin();\n\n      if (!isFullScreeMode && zoom.className.indexOf(\"zoom-out\") !== -1) {\n        zoom.className = zoom.className.replace(\"zoom-out selected\", \"zoom-in\");\n        if (config.onZoomout) config.onZoomout();\n      }\n\n      setTimeout(adjustControls, 1000);\n    };\n\n    var zoom = document.createElement(\"div\");\n    zoom.className = \"control \" + (config.toggle.has(\"zoom-in\") ? \"zoom-out selected\" : \"zoom-in\");\n\n    if (!slider && !recordAudio && !recordVideo && zoom) {\n      mediaControls.insertBefore(zoom, mediaControls.firstChild);\n    } else volumeControl.appendChild(zoom);\n\n    zoom.onclick = function () {\n      if (zoom.className.indexOf(\"zoom-out\") !== -1) {\n        zoom.className = zoom.className.replace(\"zoom-out selected\", \"zoom-in\");\n        exitFullScreen();\n      } else {\n        zoom.className = zoom.className.replace(\"zoom-in\", \"zoom-out selected\");\n        launchFullscreen(mediaElementContainer);\n      }\n    };\n\n    document.addEventListener(\"fullscreenchange\", screenStateChange, false);\n    document.addEventListener(\"mozfullscreenchange\", screenStateChange, false);\n    document.addEventListener(\"webkitfullscreenchange\", screenStateChange, false);\n  }\n\n  if (buttons.has(\"volume-slider\") || buttons.has(\"full-screen\") || buttons.has(\"record-audio\") || buttons.has(\"record-video\")) {\n    mediaElementContainer.appendChild(volumeControl);\n  }\n\n  var mediaBox = document.createElement(\"div\");\n  mediaBox.className = \"media-box\";\n  mediaElementContainer.appendChild(mediaBox);\n\n  if (config.title) {\n    var h2 = document.createElement(\"h2\");\n    h2.innerHTML = config.title;\n    h2.setAttribute(\"style\", \"position: absolute;color:white;font-size:17px;text-shadow: 1px 1px black;padding:0;margin:0;text-align: left; margin-top: 10px; margin-left: 10px; display: block; border: 0;line-height:1.5;z-index:1;\");\n    mediaBox.appendChild(h2);\n  }\n\n  mediaBox.appendChild(mediaElement);\n  if (!config.width) config.width = window.innerWidth / 2 - 50;\n  mediaElementContainer.style.width = config.width + \"px\";\n\n  if (config.height) {\n    mediaBox.style.height = config.height + \"px\";\n  }\n\n  mediaBox.querySelector(\"video\").style.maxHeight = window.innerHeight + \"px\";\n  var times = 0;\n\n  function adjustControls() {\n    mediaControls.style.marginLeft = mediaElementContainer.clientWidth - mediaControls.clientWidth - 2 + \"px\";\n\n    if (slider) {\n      slider.style.width = mediaElementContainer.clientWidth / 3 + \"px\";\n      volumeControl.style.marginLeft = mediaElementContainer.clientWidth / 3 - 30 + \"px\";\n      if (zoom) zoom.style[\"border-top-right-radius\"] = \"5px\";\n    } else {\n      volumeControl.style.marginLeft = mediaElementContainer.clientWidth - volumeControl.clientWidth - 2 + \"px\";\n    }\n\n    volumeControl.style.marginTop = mediaElementContainer.clientHeight - volumeControl.clientHeight - 2 + \"px\";\n\n    if (times < 10) {\n      times++;\n      setTimeout(adjustControls, 1000);\n    } else times = 0;\n  }\n\n  if (config.showOnMouseEnter || typeof config.showOnMouseEnter === \"undefined\") {\n    mediaElementContainer.onmouseenter = mediaElementContainer.onmousedown = function () {\n      adjustControls();\n      mediaControls.style.opacity = 1;\n      volumeControl.style.opacity = 1;\n    };\n\n    mediaElementContainer.onmouseleave = function () {\n      mediaControls.style.opacity = 0;\n      volumeControl.style.opacity = 0;\n    };\n  } else {\n    setTimeout(function () {\n      adjustControls();\n      setTimeout(function () {\n        mediaControls.style.opacity = 1;\n        volumeControl.style.opacity = 1;\n      }, 300);\n    }, 700);\n  }\n\n  adjustControls();\n\n  mediaElementContainer.toggle = function (clasName) {\n    if (typeof clasName != \"string\") {\n      for (var i = 0; i < clasName.length; i++) {\n        mediaElementContainer.toggle(clasName[i]);\n      }\n\n      return;\n    }\n\n    if (clasName === \"mute-audio\" && muteAudio) muteAudio.onclick();\n    if (clasName === \"mute-video\" && muteVideo) muteVideo.onclick();\n    if (clasName === \"record-audio\" && recordAudio) recordAudio.onclick();\n    if (clasName === \"record-video\" && recordVideo) recordVideo.onclick();\n    if (clasName === \"stop\" && stop) stop.onclick();\n    return this;\n  };\n\n  mediaElementContainer.media = mediaElement;\n  return mediaElementContainer;\n}; // __________________\n// getAudioElement.js\n\nexport function getAudioElement(mediaElement, config) {\n  config = config || {};\n\n  if (!mediaElement.nodeName || mediaElement.nodeName.toLowerCase() !== \"audio\" && mediaElement.nodeName.toLowerCase() !== \"video\") {\n    var mediaStream = mediaElement;\n    mediaElement = document.createElement(\"audio\");\n\n    try {\n      mediaElement.setAttributeNode(document.createAttribute(\"autoplay\"));\n      mediaElement.setAttributeNode(document.createAttribute(\"controls\"));\n    } catch (e) {\n      mediaElement.setAttribute(\"autoplay\", true);\n      mediaElement.setAttribute(\"controls\", true);\n    }\n\n    if (\"srcObject\" in mediaElement) {\n      mediaElement.mediaElement = mediaStream;\n    } else {\n      mediaElement[!!navigator.mozGetUserMedia ? \"mozSrcObject\" : \"src\"] = !!navigator.mozGetUserMedia ? mediaStream : (window.URL || window.webkitURL).createObjectURL(mediaStream);\n    }\n  }\n\n  config.toggle = config.toggle || [];\n\n  config.toggle.has = function (element) {\n    return config.toggle.indexOf(element) !== -1;\n  };\n\n  var mediaElementContainer = document.createElement(\"div\");\n  mediaElementContainer.className = \"media-container\";\n  var mediaControls = document.createElement(\"div\");\n  mediaControls.className = \"media-controls\";\n  mediaElementContainer.appendChild(mediaControls);\n  var muteAudio = document.createElement(\"div\");\n  muteAudio.className = \"control \" + (config.toggle.has(\"mute-audio\") ? \"unmute-audio selected\" : \"mute-audio\");\n  mediaControls.appendChild(muteAudio);\n  muteAudio.style[\"border-top-left-radius\"] = \"5px\";\n\n  muteAudio.onclick = function () {\n    if (muteAudio.className.indexOf(\"unmute-audio\") !== -1) {\n      muteAudio.className = muteAudio.className.replace(\"unmute-audio selected\", \"mute-audio\");\n      mediaElement.muted = false;\n      if (config.onUnMuted) config.onUnMuted(\"audio\");\n    } else {\n      muteAudio.className = muteAudio.className.replace(\"mute-audio\", \"unmute-audio selected\");\n      mediaElement.muted = true;\n      if (config.onMuted) config.onMuted(\"audio\");\n    }\n  };\n\n  if (!config.buttons || config.buttons && config.buttons.indexOf(\"record-audio\") !== -1) {\n    var recordAudio = document.createElement(\"div\");\n    recordAudio.className = \"control \" + (config.toggle.has(\"record-audio\") ? \"stop-recording-audio selected\" : \"record-audio\");\n    mediaControls.appendChild(recordAudio);\n\n    recordAudio.onclick = function () {\n      if (recordAudio.className.indexOf(\"stop-recording-audio\") !== -1) {\n        recordAudio.className = recordAudio.className.replace(\"stop-recording-audio selected\", \"record-audio\");\n        if (config.onRecordingStopped) config.onRecordingStopped(\"audio\");\n      } else {\n        recordAudio.className = recordAudio.className.replace(\"record-audio\", \"stop-recording-audio selected\");\n        if (config.onRecordingStarted) config.onRecordingStarted(\"audio\");\n      }\n    };\n  }\n\n  var volumeSlider = document.createElement(\"div\");\n  volumeSlider.className = \"control volume-slider\";\n  volumeSlider.style.width = \"auto\";\n  mediaControls.appendChild(volumeSlider);\n  var slider = document.createElement(\"input\");\n  slider.style.marginTop = \"11px\";\n  slider.style.width = \" 200px\";\n\n  if (config.buttons && config.buttons.indexOf(\"record-audio\") === -1) {\n    slider.style.width = \" 241px\";\n  }\n\n  slider.type = \"range\";\n  slider.min = 0;\n  slider.max = 100;\n  slider.value = 100;\n\n  slider.onchange = function () {\n    mediaElement.volume = \".\" + slider.value.toString().substr(0, 1);\n  };\n\n  volumeSlider.appendChild(slider);\n  var stop = document.createElement(\"div\");\n  stop.className = \"control stop\";\n  mediaControls.appendChild(stop);\n\n  stop.onclick = function () {\n    mediaElementContainer.style.opacity = 0;\n    setTimeout(function () {\n      if (mediaElementContainer.parentNode) {\n        mediaElementContainer.parentNode.removeChild(mediaElementContainer);\n      }\n    }, 800);\n    if (config.onStopped) config.onStopped();\n  };\n\n  stop.style[\"border-top-right-radius\"] = \"5px\";\n  stop.style[\"border-bottom-right-radius\"] = \"5px\";\n  var mediaBox = document.createElement(\"div\");\n  mediaBox.className = \"media-box\";\n  mediaElementContainer.appendChild(mediaBox);\n  var h2 = document.createElement(\"h2\");\n  h2.innerHTML = config.title || \"Audio Element\";\n  h2.setAttribute(\"style\", \"position: absolute;color: rgb(160, 160, 160);font-size: 20px;text-shadow: 1px 1px rgb(255, 255, 255);padding:0;margin:0;\");\n  mediaBox.appendChild(h2);\n  mediaBox.appendChild(mediaElement);\n  mediaElementContainer.style.width = \"329px\";\n  mediaBox.style.height = \"90px\";\n  h2.style.width = mediaElementContainer.style.width;\n  h2.style.height = \"50px\";\n  h2.style.overflow = \"hidden\";\n  var times = 0;\n\n  function adjustControls() {\n    mediaControls.style.marginLeft = mediaElementContainer.clientWidth - mediaControls.clientWidth - 7 + \"px\";\n    mediaControls.style.marginTop = mediaElementContainer.clientHeight - mediaControls.clientHeight - 6 + \"px\";\n\n    if (times < 10) {\n      times++;\n      setTimeout(adjustControls, 1000);\n    } else times = 0;\n  }\n\n  if (config.showOnMouseEnter || typeof config.showOnMouseEnter === \"undefined\") {\n    mediaElementContainer.onmouseenter = mediaElementContainer.onmousedown = function () {\n      adjustControls();\n      mediaControls.style.opacity = 1;\n    };\n\n    mediaElementContainer.onmouseleave = function () {\n      mediaControls.style.opacity = 0;\n    };\n  } else {\n    setTimeout(function () {\n      adjustControls();\n      setTimeout(function () {\n        mediaControls.style.opacity = 1;\n      }, 300);\n    }, 700);\n  }\n\n  adjustControls();\n\n  mediaElementContainer.toggle = function (clasName) {\n    if (typeof clasName != \"string\") {\n      for (var i = 0; i < clasName.length; i++) {\n        mediaElementContainer.toggle(clasName[i]);\n      }\n\n      return;\n    }\n\n    if (clasName === \"mute-audio\" && muteAudio) muteAudio.onclick();\n    if (clasName === \"record-audio\" && recordAudio) recordAudio.onclick();\n    if (clasName === \"stop\" && stop) stop.onclick();\n    return this;\n  };\n\n  mediaElementContainer.media = mediaElement;\n  return mediaElementContainer;\n}","map":{"version":3,"sources":["C:/Users/o_ov0/Downloads/Front-End-develop/Front-End-develop/client/src/components/independent/webRTCRoom/getHTMLMediaElement.jsx"],"names":["getHTMLMediaElement","mediaElement","config","nodeName","toLowerCase","getVideoTracks","length","getAudioElement","mediaStream","document","createElement","setAttributeNode","createAttribute","e","setAttribute","srcObject","navigator","mozGetUserMedia","window","URL","webkitURL","createObjectURL","buttons","has","element","indexOf","toggle","mediaElementContainer","className","mediaControls","appendChild","muteAudio","onclick","replace","muted","volume","onUnMuted","onMuted","muteVideo","play","pause","takeSnapshot","onTakeSnapshot","stop","style","opacity","setTimeout","parentNode","removeChild","onStopped","volumeControl","recordAudio","onRecordingStopped","onRecordingStarted","recordVideo","volumeSlider","slider","type","min","max","value","onchange","toString","substr","launchFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","exitFullScreen","fullscreen","cancelFullScreen","mozFullScreen","mozCancelFullScreen","webkitIsFullScreen","webkitCancelFullScreen","screenStateChange","srcElement","isFullScreeMode","width","innerWidth","display","height","mediaBox","innerHeight","onZoomout","onZoomin","zoom","adjustControls","insertBefore","firstChild","addEventListener","title","h2","innerHTML","querySelector","maxHeight","times","marginLeft","clientWidth","marginTop","clientHeight","showOnMouseEnter","onmouseenter","onmousedown","onmouseleave","clasName","i","media","overflow"],"mappings":"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","sourcesContent":["export const getHTMLMediaElement = (mediaElement, config) => {\n  config = config || {};\n\n  if (\n    !mediaElement.nodeName ||\n    (mediaElement.nodeName.toLowerCase() !== \"audio\" &&\n      mediaElement.nodeName.toLowerCase() !== \"video\")\n  ) {\n    if (!mediaElement.getVideoTracks().length) {\n      return getAudioElement(mediaElement, config);\n    }\n\n    var mediaStream = mediaElement;\n    mediaElement = document.createElement(\n      mediaStream.getVideoTracks().length ? \"video\" : \"audio\"\n    );\n\n    try {\n      mediaElement.setAttributeNode(document.createAttribute(\"autoplay\"));\n      mediaElement.setAttributeNode(document.createAttribute(\"playsinline\"));\n    } catch (e) {\n      mediaElement.setAttribute(\"autoplay\", true);\n      mediaElement.setAttribute(\"playsinline\", true);\n    }\n\n    if (\"srcObject\" in mediaElement) {\n      mediaElement.srcObject = mediaStream;\n    } else {\n      mediaElement[\n        !!navigator.mozGetUserMedia ? \"mozSrcObject\" : \"src\"\n      ] = !!navigator.mozGetUserMedia\n        ? mediaStream\n        : (window.URL || window.webkitURL).createObjectURL(mediaStream);\n    }\n  }\n\n  if (\n    mediaElement.nodeName &&\n    mediaElement.nodeName.toLowerCase() === \"audio\"\n  ) {\n    return getAudioElement(mediaElement, config);\n  }\n\n  var buttons = config.buttons || [\n    \"mute-audio\",\n    \"mute-video\",\n    \"full-screen\",\n    \"volume-slider\",\n    \"stop\"\n  ];\n  buttons.has = function(element) {\n    return buttons.indexOf(element) !== -1;\n  };\n\n  config.toggle = config.toggle || [];\n  config.toggle.has = function(element) {\n    return config.toggle.indexOf(element) !== -1;\n  };\n\n  var mediaElementContainer = document.createElement(\"div\");\n  mediaElementContainer.className = \"media-container\";\n\n  var mediaControls = document.createElement(\"div\");\n  mediaControls.className = \"media-controls\";\n  mediaElementContainer.appendChild(mediaControls);\n\n  if (buttons.has(\"mute-audio\")) {\n    var muteAudio = document.createElement(\"div\");\n    muteAudio.className =\n      \"control \" +\n      (config.toggle.has(\"mute-audio\")\n        ? \"unmute-audio selected\"\n        : \"mute-audio\");\n    mediaControls.appendChild(muteAudio);\n\n    muteAudio.onclick = function() {\n      if (muteAudio.className.indexOf(\"unmute-audio\") !== -1) {\n        muteAudio.className = muteAudio.className.replace(\n          \"unmute-audio selected\",\n          \"mute-audio\"\n        );\n        mediaElement.muted = false;\n        mediaElement.volume = 1;\n        if (config.onUnMuted) config.onUnMuted(\"audio\");\n      } else {\n        muteAudio.className = muteAudio.className.replace(\n          \"mute-audio\",\n          \"unmute-audio selected\"\n        );\n        mediaElement.muted = true;\n        mediaElement.volume = 0;\n        if (config.onMuted) config.onMuted(\"audio\");\n      }\n    };\n  }\n\n  if (buttons.has(\"mute-video\")) {\n    var muteVideo = document.createElement(\"div\");\n    muteVideo.className =\n      \"control \" +\n      (config.toggle.has(\"mute-video\")\n        ? \"unmute-video selected\"\n        : \"mute-video\");\n    mediaControls.appendChild(muteVideo);\n\n    muteVideo.onclick = function() {\n      if (muteVideo.className.indexOf(\"unmute-video\") !== -1) {\n        muteVideo.className = muteVideo.className.replace(\n          \"unmute-video selected\",\n          \"mute-video\"\n        );\n        mediaElement.muted = false;\n        mediaElement.volume = 1;\n        mediaElement.play();\n        if (config.onUnMuted) config.onUnMuted(\"video\");\n      } else {\n        muteVideo.className = muteVideo.className.replace(\n          \"mute-video\",\n          \"unmute-video selected\"\n        );\n        mediaElement.muted = true;\n        mediaElement.volume = 0;\n        mediaElement.pause();\n        if (config.onMuted) config.onMuted(\"video\");\n      }\n    };\n  }\n\n  if (buttons.has(\"take-snapshot\")) {\n    var takeSnapshot = document.createElement(\"div\");\n    takeSnapshot.className = \"control take-snapshot\";\n    mediaControls.appendChild(takeSnapshot);\n\n    takeSnapshot.onclick = function() {\n      if (config.onTakeSnapshot) config.onTakeSnapshot();\n    };\n  }\n\n  if (buttons.has(\"stop\")) {\n    var stop = document.createElement(\"div\");\n    stop.className = \"control stop\";\n    mediaControls.appendChild(stop);\n\n    stop.onclick = function() {\n      mediaElementContainer.style.opacity = 0;\n      setTimeout(function() {\n        if (mediaElementContainer.parentNode) {\n          mediaElementContainer.parentNode.removeChild(mediaElementContainer);\n        }\n      }, 800);\n      if (config.onStopped) config.onStopped();\n    };\n  }\n\n  var volumeControl = document.createElement(\"div\");\n  volumeControl.className = \"volume-control\";\n\n  if (buttons.has(\"record-audio\")) {\n    var recordAudio = document.createElement(\"div\");\n    recordAudio.className =\n      \"control \" +\n      (config.toggle.has(\"record-audio\")\n        ? \"stop-recording-audio selected\"\n        : \"record-audio\");\n    volumeControl.appendChild(recordAudio);\n\n    recordAudio.onclick = function() {\n      if (recordAudio.className.indexOf(\"stop-recording-audio\") !== -1) {\n        recordAudio.className = recordAudio.className.replace(\n          \"stop-recording-audio selected\",\n          \"record-audio\"\n        );\n        if (config.onRecordingStopped) config.onRecordingStopped(\"audio\");\n      } else {\n        recordAudio.className = recordAudio.className.replace(\n          \"record-audio\",\n          \"stop-recording-audio selected\"\n        );\n        if (config.onRecordingStarted) config.onRecordingStarted(\"audio\");\n      }\n    };\n  }\n\n  if (buttons.has(\"record-video\")) {\n    var recordVideo = document.createElement(\"div\");\n    recordVideo.className =\n      \"control \" +\n      (config.toggle.has(\"record-video\")\n        ? \"stop-recording-video selected\"\n        : \"record-video\");\n    volumeControl.appendChild(recordVideo);\n\n    recordVideo.onclick = function() {\n      if (recordVideo.className.indexOf(\"stop-recording-video\") !== -1) {\n        recordVideo.className = recordVideo.className.replace(\n          \"stop-recording-video selected\",\n          \"record-video\"\n        );\n        if (config.onRecordingStopped) config.onRecordingStopped(\"video\");\n      } else {\n        recordVideo.className = recordVideo.className.replace(\n          \"record-video\",\n          \"stop-recording-video selected\"\n        );\n        if (config.onRecordingStarted) config.onRecordingStarted(\"video\");\n      }\n    };\n  }\n\n  if (buttons.has(\"volume-slider\")) {\n    var volumeSlider = document.createElement(\"div\");\n    volumeSlider.className = \"control volume-slider\";\n    volumeControl.appendChild(volumeSlider);\n\n    var slider = document.createElement(\"input\");\n    slider.type = \"range\";\n    slider.min = 0;\n    slider.max = 100;\n    slider.value = 100;\n    slider.onchange = function() {\n      mediaElement.volume = \".\" + slider.value.toString().substr(0, 1);\n    };\n    volumeSlider.appendChild(slider);\n  }\n\n  if (buttons.has(\"full-screen\")) {\n    var zoom = document.createElement(\"div\");\n    zoom.className =\n      \"control \" +\n      (config.toggle.has(\"zoom-in\") ? \"zoom-out selected\" : \"zoom-in\");\n\n    if (!slider && !recordAudio && !recordVideo && zoom) {\n      mediaControls.insertBefore(zoom, mediaControls.firstChild);\n    } else volumeControl.appendChild(zoom);\n\n    zoom.onclick = function() {\n      if (zoom.className.indexOf(\"zoom-out\") !== -1) {\n        zoom.className = zoom.className.replace(\"zoom-out selected\", \"zoom-in\");\n        exitFullScreen();\n      } else {\n        zoom.className = zoom.className.replace(\"zoom-in\", \"zoom-out selected\");\n        launchFullscreen(mediaElementContainer);\n      }\n    };\n\n    function launchFullscreen(element) {\n      if (element.requestFullscreen) {\n        element.requestFullscreen();\n      } else if (element.mozRequestFullScreen) {\n        element.mozRequestFullScreen();\n      } else if (element.webkitRequestFullscreen) {\n        element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      }\n    }\n\n    function exitFullScreen() {\n      if (document.fullscreen) {\n        document.cancelFullScreen();\n      }\n\n      if (document.mozFullScreen) {\n        document.mozCancelFullScreen();\n      }\n\n      if (document.webkitIsFullScreen) {\n        document.webkitCancelFullScreen();\n      }\n    }\n\n    function screenStateChange(e) {\n      if (e.srcElement !== mediaElementContainer) return;\n\n      var isFullScreeMode =\n        document.webkitIsFullScreen ||\n        document.mozFullScreen ||\n        document.fullscreen;\n\n      mediaElementContainer.style.width =\n        (isFullScreeMode ? window.innerWidth - 20 : config.width) + \"px\";\n      mediaElementContainer.style.display = isFullScreeMode\n        ? \"block\"\n        : \"inline-block\";\n\n      if (config.height) {\n        mediaBox.style.height =\n          (isFullScreeMode ? window.innerHeight - 20 : config.height) + \"px\";\n      }\n\n      if (!isFullScreeMode && config.onZoomout) config.onZoomout();\n      if (isFullScreeMode && config.onZoomin) config.onZoomin();\n\n      if (!isFullScreeMode && zoom.className.indexOf(\"zoom-out\") !== -1) {\n        zoom.className = zoom.className.replace(\"zoom-out selected\", \"zoom-in\");\n        if (config.onZoomout) config.onZoomout();\n      }\n      setTimeout(adjustControls, 1000);\n    }\n\n    document.addEventListener(\"fullscreenchange\", screenStateChange, false);\n    document.addEventListener(\"mozfullscreenchange\", screenStateChange, false);\n    document.addEventListener(\n      \"webkitfullscreenchange\",\n      screenStateChange,\n      false\n    );\n  }\n\n  if (\n    buttons.has(\"volume-slider\") ||\n    buttons.has(\"full-screen\") ||\n    buttons.has(\"record-audio\") ||\n    buttons.has(\"record-video\")\n  ) {\n    mediaElementContainer.appendChild(volumeControl);\n  }\n\n  var mediaBox = document.createElement(\"div\");\n  mediaBox.className = \"media-box\";\n  mediaElementContainer.appendChild(mediaBox);\n\n  if (config.title) {\n    var h2 = document.createElement(\"h2\");\n    h2.innerHTML = config.title;\n    h2.setAttribute(\n      \"style\",\n      \"position: absolute;color:white;font-size:17px;text-shadow: 1px 1px black;padding:0;margin:0;text-align: left; margin-top: 10px; margin-left: 10px; display: block; border: 0;line-height:1.5;z-index:1;\"\n    );\n    mediaBox.appendChild(h2);\n  }\n\n  mediaBox.appendChild(mediaElement);\n\n  if (!config.width) config.width = window.innerWidth / 2 - 50;\n\n  mediaElementContainer.style.width = config.width + \"px\";\n\n  if (config.height) {\n    mediaBox.style.height = config.height + \"px\";\n  }\n\n  mediaBox.querySelector(\"video\").style.maxHeight = window.innerHeight + \"px\";\n\n  var times = 0;\n\n  function adjustControls() {\n    mediaControls.style.marginLeft =\n      mediaElementContainer.clientWidth - mediaControls.clientWidth - 2 + \"px\";\n\n    if (slider) {\n      slider.style.width = mediaElementContainer.clientWidth / 3 + \"px\";\n      volumeControl.style.marginLeft =\n        mediaElementContainer.clientWidth / 3 - 30 + \"px\";\n\n      if (zoom) zoom.style[\"border-top-right-radius\"] = \"5px\";\n    } else {\n      volumeControl.style.marginLeft =\n        mediaElementContainer.clientWidth -\n        volumeControl.clientWidth -\n        2 +\n        \"px\";\n    }\n\n    volumeControl.style.marginTop =\n      mediaElementContainer.clientHeight -\n      volumeControl.clientHeight -\n      2 +\n      \"px\";\n\n    if (times < 10) {\n      times++;\n      setTimeout(adjustControls, 1000);\n    } else times = 0;\n  }\n\n  if (\n    config.showOnMouseEnter ||\n    typeof config.showOnMouseEnter === \"undefined\"\n  ) {\n    mediaElementContainer.onmouseenter = mediaElementContainer.onmousedown = function() {\n      adjustControls();\n      mediaControls.style.opacity = 1;\n      volumeControl.style.opacity = 1;\n    };\n\n    mediaElementContainer.onmouseleave = function() {\n      mediaControls.style.opacity = 0;\n      volumeControl.style.opacity = 0;\n    };\n  } else {\n    setTimeout(function() {\n      adjustControls();\n      setTimeout(function() {\n        mediaControls.style.opacity = 1;\n        volumeControl.style.opacity = 1;\n      }, 300);\n    }, 700);\n  }\n\n  adjustControls();\n\n  mediaElementContainer.toggle = function(clasName) {\n    if (typeof clasName != \"string\") {\n      for (var i = 0; i < clasName.length; i++) {\n        mediaElementContainer.toggle(clasName[i]);\n      }\n      return;\n    }\n\n    if (clasName === \"mute-audio\" && muteAudio) muteAudio.onclick();\n    if (clasName === \"mute-video\" && muteVideo) muteVideo.onclick();\n\n    if (clasName === \"record-audio\" && recordAudio) recordAudio.onclick();\n    if (clasName === \"record-video\" && recordVideo) recordVideo.onclick();\n\n    if (clasName === \"stop\" && stop) stop.onclick();\n\n    return this;\n  };\n\n  mediaElementContainer.media = mediaElement;\n\n  return mediaElementContainer;\n};\n// __________________\n// getAudioElement.js\n\nexport function getAudioElement(mediaElement, config) {\n  config = config || {};\n\n  if (\n    !mediaElement.nodeName ||\n    (mediaElement.nodeName.toLowerCase() !== \"audio\" &&\n      mediaElement.nodeName.toLowerCase() !== \"video\")\n  ) {\n    var mediaStream = mediaElement;\n    mediaElement = document.createElement(\"audio\");\n\n    try {\n      mediaElement.setAttributeNode(document.createAttribute(\"autoplay\"));\n      mediaElement.setAttributeNode(document.createAttribute(\"controls\"));\n    } catch (e) {\n      mediaElement.setAttribute(\"autoplay\", true);\n      mediaElement.setAttribute(\"controls\", true);\n    }\n\n    if (\"srcObject\" in mediaElement) {\n      mediaElement.mediaElement = mediaStream;\n    } else {\n      mediaElement[\n        !!navigator.mozGetUserMedia ? \"mozSrcObject\" : \"src\"\n      ] = !!navigator.mozGetUserMedia\n        ? mediaStream\n        : (window.URL || window.webkitURL).createObjectURL(mediaStream);\n    }\n  }\n\n  config.toggle = config.toggle || [];\n  config.toggle.has = function(element) {\n    return config.toggle.indexOf(element) !== -1;\n  };\n\n  var mediaElementContainer = document.createElement(\"div\");\n  mediaElementContainer.className = \"media-container\";\n\n  var mediaControls = document.createElement(\"div\");\n  mediaControls.className = \"media-controls\";\n  mediaElementContainer.appendChild(mediaControls);\n\n  var muteAudio = document.createElement(\"div\");\n  muteAudio.className =\n    \"control \" +\n    (config.toggle.has(\"mute-audio\") ? \"unmute-audio selected\" : \"mute-audio\");\n  mediaControls.appendChild(muteAudio);\n\n  muteAudio.style[\"border-top-left-radius\"] = \"5px\";\n\n  muteAudio.onclick = function() {\n    if (muteAudio.className.indexOf(\"unmute-audio\") !== -1) {\n      muteAudio.className = muteAudio.className.replace(\n        \"unmute-audio selected\",\n        \"mute-audio\"\n      );\n      mediaElement.muted = false;\n      if (config.onUnMuted) config.onUnMuted(\"audio\");\n    } else {\n      muteAudio.className = muteAudio.className.replace(\n        \"mute-audio\",\n        \"unmute-audio selected\"\n      );\n      mediaElement.muted = true;\n      if (config.onMuted) config.onMuted(\"audio\");\n    }\n  };\n\n  if (\n    !config.buttons ||\n    (config.buttons && config.buttons.indexOf(\"record-audio\") !== -1)\n  ) {\n    var recordAudio = document.createElement(\"div\");\n    recordAudio.className =\n      \"control \" +\n      (config.toggle.has(\"record-audio\")\n        ? \"stop-recording-audio selected\"\n        : \"record-audio\");\n    mediaControls.appendChild(recordAudio);\n\n    recordAudio.onclick = function() {\n      if (recordAudio.className.indexOf(\"stop-recording-audio\") !== -1) {\n        recordAudio.className = recordAudio.className.replace(\n          \"stop-recording-audio selected\",\n          \"record-audio\"\n        );\n        if (config.onRecordingStopped) config.onRecordingStopped(\"audio\");\n      } else {\n        recordAudio.className = recordAudio.className.replace(\n          \"record-audio\",\n          \"stop-recording-audio selected\"\n        );\n        if (config.onRecordingStarted) config.onRecordingStarted(\"audio\");\n      }\n    };\n  }\n\n  var volumeSlider = document.createElement(\"div\");\n  volumeSlider.className = \"control volume-slider\";\n  volumeSlider.style.width = \"auto\";\n  mediaControls.appendChild(volumeSlider);\n\n  var slider = document.createElement(\"input\");\n  slider.style.marginTop = \"11px\";\n  slider.style.width = \" 200px\";\n\n  if (config.buttons && config.buttons.indexOf(\"record-audio\") === -1) {\n    slider.style.width = \" 241px\";\n  }\n\n  slider.type = \"range\";\n  slider.min = 0;\n  slider.max = 100;\n  slider.value = 100;\n  slider.onchange = function() {\n    mediaElement.volume = \".\" + slider.value.toString().substr(0, 1);\n  };\n  volumeSlider.appendChild(slider);\n\n  var stop = document.createElement(\"div\");\n  stop.className = \"control stop\";\n  mediaControls.appendChild(stop);\n\n  stop.onclick = function() {\n    mediaElementContainer.style.opacity = 0;\n    setTimeout(function() {\n      if (mediaElementContainer.parentNode) {\n        mediaElementContainer.parentNode.removeChild(mediaElementContainer);\n      }\n    }, 800);\n    if (config.onStopped) config.onStopped();\n  };\n\n  stop.style[\"border-top-right-radius\"] = \"5px\";\n  stop.style[\"border-bottom-right-radius\"] = \"5px\";\n\n  var mediaBox = document.createElement(\"div\");\n  mediaBox.className = \"media-box\";\n  mediaElementContainer.appendChild(mediaBox);\n\n  var h2 = document.createElement(\"h2\");\n  h2.innerHTML = config.title || \"Audio Element\";\n  h2.setAttribute(\n    \"style\",\n    \"position: absolute;color: rgb(160, 160, 160);font-size: 20px;text-shadow: 1px 1px rgb(255, 255, 255);padding:0;margin:0;\"\n  );\n  mediaBox.appendChild(h2);\n\n  mediaBox.appendChild(mediaElement);\n\n  mediaElementContainer.style.width = \"329px\";\n  mediaBox.style.height = \"90px\";\n\n  h2.style.width = mediaElementContainer.style.width;\n  h2.style.height = \"50px\";\n  h2.style.overflow = \"hidden\";\n\n  var times = 0;\n\n  function adjustControls() {\n    mediaControls.style.marginLeft =\n      mediaElementContainer.clientWidth - mediaControls.clientWidth - 7 + \"px\";\n    mediaControls.style.marginTop =\n      mediaElementContainer.clientHeight -\n      mediaControls.clientHeight -\n      6 +\n      \"px\";\n    if (times < 10) {\n      times++;\n      setTimeout(adjustControls, 1000);\n    } else times = 0;\n  }\n\n  if (\n    config.showOnMouseEnter ||\n    typeof config.showOnMouseEnter === \"undefined\"\n  ) {\n    mediaElementContainer.onmouseenter = mediaElementContainer.onmousedown = function() {\n      adjustControls();\n      mediaControls.style.opacity = 1;\n    };\n\n    mediaElementContainer.onmouseleave = function() {\n      mediaControls.style.opacity = 0;\n    };\n  } else {\n    setTimeout(function() {\n      adjustControls();\n      setTimeout(function() {\n        mediaControls.style.opacity = 1;\n      }, 300);\n    }, 700);\n  }\n\n  adjustControls();\n\n  mediaElementContainer.toggle = function(clasName) {\n    if (typeof clasName != \"string\") {\n      for (var i = 0; i < clasName.length; i++) {\n        mediaElementContainer.toggle(clasName[i]);\n      }\n      return;\n    }\n\n    if (clasName === \"mute-audio\" && muteAudio) muteAudio.onclick();\n    if (clasName === \"record-audio\" && recordAudio) recordAudio.onclick();\n    if (clasName === \"stop\" && stop) stop.onclick();\n\n    return this;\n  };\n\n  mediaElementContainer.media = mediaElement;\n\n  return mediaElementContainer;\n}\n"]},"metadata":{},"sourceType":"module"}